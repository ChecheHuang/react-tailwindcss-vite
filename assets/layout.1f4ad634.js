import{u as v,g as x,r as h,a as p,j as s,aD as y,aE as R,k as C,aF as E,aG as I,a2 as A,aH as j,aI as B,aJ as $,aK as J,aL as L,az as F,aA as H,O as M}from"./react-select.esm.0db4585c.js";import{r as S,c as N}from"./index.27d376f0.js";import{E as P,A as z}from"./AntdProvider.1907c96e.js";import{u as T}from"./useHook.2867b45e.js";const q=JSON.parse(sessionStorage.getItem("selectKeys")||"[]"),D=JSON.parse(sessionStorage.getItem("openKeys")||"[]"),Q=({collapsed:r})=>{var f,b,k;const t=(k=(b=(f=S.find(d=>d.path==="/ui"))==null?void 0:f.children)==null?void 0:b.find(d=>d.path==="/ui/antd"))==null?void 0:k.children,o=v(),n=x(),[a,e]=h.exports.useState(q),[c,l]=h.exports.useState(D),{menu:u,keyArr:i}=O(t),m=d=>{const w=[d[d.length-1]];l(w),sessionStorage.setItem("openKeys",JSON.stringify(w))},g=d=>{o(d.key),sessionStorage.setItem("selectKeys",JSON.stringify([d.key])),e([d.key])};return h.exports.useEffect(()=>{!i.includes(n.pathname)||(sessionStorage.setItem("selectKeys",JSON.stringify([n.pathname])),e([n.pathname]))},[n.pathname]),p("div",{className:N("max-h-[100vh] overflow-y-scroll bg-[#001529] scrollbar-none duration-300 ease-in-out ",r?"w-20":" w-[200px]"),children:[s(y,{to:"/setting",children:p("div",{className:"bg-dark sticky top-0 z-10 flex h-16 items-center justify-center  gap-3 ",children:[s(R,{width:50,className:"rounded-md",src:"https://images.pexels.com/photos/434341/pexels-photo-434341.jpeg?auto=compress&cs=tinysrgb&w=600",alt:""}),!r&&s("div",{className:"break-keep text-white ",children:"Antd\u5F8C\u53F0"})]})}),s(C,{inlineCollapsed:r,onClick:g,onOpenChange:m,mode:"inline",theme:"dark",selectedKeys:a,openKeys:c,items:u})]})};function O(r){const t=[];function o(a){a.forEach(e=>{!e.isHidden&&!e.path.includes(":")&&(t.includes(e.path)||t.push(e.path)),e.children&&o(e.children)})}const n=r.reduce((a,e)=>{if(e.isHidden||e.path.includes(":"))return a;const{path:c,label:l,icon:u,children:i}=e,m={key:i?c+"/layout":c,icon:u,label:l,...i&&{children:O(i).menu}};return i||t.push(c),[...a,m]},[]);return o(r),{menu:n,keyArr:t}}const U=()=>{const t=x().pathname.split("/").filter(e=>e),o=K(S),n=t.map((e,c)=>{const l=`/${t.slice(0,c+1).join("/")}`,{name:u,icon:i}=_(o,l);return{key:l,title:p(y,{to:l,children:[i&&i," ",s("span",{children:u})]})}}),a=[{title:s(y,{to:"/ui/antd",children:s(E,{})}),key:"home"}].concat(n.filter((e,c)=>c!==0));return s(I,{items:a})},W=h.exports.memo(U);function _(r,t){for(const[o,n]of r.entries())if(o.test(t))return n;return{name:"",icon:""}}function K(r){const t=new Map,o=[];return r.forEach(n=>{const{path:a,name:e,icon:c,children:l}=n,u=c?{name:e}:{name:e,icon:c},i=new RegExp(`^${a.replace(/:[^/]+/g,"[^/]+")}$`);l?(t.set(i,u),K(l).forEach((g,f)=>{t.set(f,g)})):a.includes(":")?o.push({path:a,...u}):t.set(i,u)}),o.forEach(({path:n,...a})=>{const e=new RegExp(`^${n.replace(/:[^/]+/g,"[^/]+")}$`);t.set(e,a)}),t}const G=({toggleCollapsed:r,collapsed:t,className:o})=>{const n=v(),a=[{key:"1",label:s(P,{onClick:()=>{localStorage.clear(),n("/login")},type:"info",children:"\u767B\u51FA"})}];return p("header",{className:N("flex h-16  items-center justify-between px-3 shadow-slate-500 bg-white	",o),children:[p("div",{className:"flex gap-10",children:[s(A,{size:"small",onClick:r,children:t?s(j,{}):s(B,{})}),s(W,{})]}),s($,{menu:{items:a},placement:"bottomLeft",arrow:!0,children:s(J,{src:"https://images.pexels.com/photos/15889175/pexels-photo-15889175.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",className:"cursor-pointer",size:44,icon:s(L,{})})})]})},V=new F({defaultOptions:{queries:{staleTime:1e3*60*5}}}),te=()=>{const{pathname:r}=x(),{windowWidth:t}=T(),[o,n]=h.exports.useState(t<1e3),a=h.exports.useRef(null);return h.exports.useEffect(()=>{const e=t<1e3;n(e)},[t]),h.exports.useEffect(()=>{var e;(e=a.current)==null||e.scrollTo(0,0)},[r]),s(H,{client:V,children:s(z,{children:p("section",{className:"flex h-screen",children:[s(Q,{collapsed:o}),p("section",{className:"flex flex-1 flex-col overflow-y-auto",children:[s(G,{toggleCollapsed:()=>n(!o),collapsed:o}),s("main",{ref:a,className:"scrollbar-thumb-dark relative h-[calc(100vh-4rem)] overflow-y-auto scroll-smooth  bg-slate-200 scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-rounded   ",children:s(M,{})})]})]})})})};export{te as default};
