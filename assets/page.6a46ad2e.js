import{C as $,M as q,d as z,g as H}from"./store_list.7af8721c.js";import{r as _,j as e,h as F,V as f,W,u as N,X as D,a as h,Y as A,Z as U,$ as V,a0 as X,a1 as Z,D as G,w as J,a2 as L,a3 as P,p as tt,a4 as j,a5 as et,a6 as T,a7 as B,a8 as at,a9 as nt}from"./index.32b7d652.js";import{E as v,u as st}from"./AntdProvider.b02cb555.js";import{u as ot}from"./useHook.9e89042b.js";import"./index.6e63991c.js";const it=({data:a=[],handleExport:o})=>{const[n,i]=_.exports.useState(!1);function c(){i(!0);const s=f.book_new(),t=f.json_to_sheet(a);f.book_append_sheet(s,t,"excel"),W(s,"Excel.xlsx"),i(!1)}return e(F,{children:e(v,{"data-inspector-line":"30","data-inspector-column":"6","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\button\\DownloadButton.tsx",className:"bg-green-800 hover:!bg-green-700",type:"primary",onClick:o||c,loading:n,children:"\u4E0B\u8F09Excel"})})},ct=({data:a,columns:o,templateTableProps:n,onPaginate:i,onSort:c,onFilter:l,onSelect:s,onExport:t,onSearch:d,searchLayoutArray:r,...p})=>{const x=(n==null?void 0:n.width)||60,O=(n==null?void 0:n.align)||"center",{windowHeight:I}=ot(),M=N(),[y]=D.useForm(),K=(u,m,w,g)=>{const{action:b}=g,C=new Map([["paginate",()=>i&&i(u)],["sort",()=>c&&c(w)],["filter",()=>l&&l(m)]]).get(b)||(()=>console.log("no action"));C==null||C.call(void 0)},Y=()=>{M("create")},S=o.map(u=>({key:u.key?u.key:u.dataIndex?u.dataIndex:u.title,align:O,width:x,...u})),Q=S.reduce((u,m)=>(u+=m.width,u),0),R=()=>{y.resetFields()};return e($,{"data-inspector-line":"105","data-inspector-column":"4","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",children:h(q,{"data-inspector-line":"106","data-inspector-column":"6","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",children:[r&&(r==null?void 0:r.length)!==0&&e(D,{"data-inspector-line":"108","data-inspector-column":"10","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",className:"mb-3",layout:"vertical",form:y,onFinish:d,children:h("div",{"data-inspector-line":"114","data-inspector-column":"12","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",className:"relative grid gap-x-3",children:[r==null?void 0:r.map(({label:u,name:m,content:w,className:g,rules:b,...k})=>e(D.Item,{"data-inspector-line":"118","data-inspector-column":"20","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",className:g,label:u,name:m,rules:b,...k,children:w||e(A,{"data-inspector-line":"129","data-inspector-column":"24","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",placeholder:`\u8ACB\u8F38\u5165${u}`})},m)),h("div",{"data-inspector-line":"135","data-inspector-column":"14","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",className:" col-span-4 flex items-center justify-end gap-2  ",children:[e(v,{"data-inspector-line":"136","data-inspector-column":"16","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",onClick:R,danger:!0,children:"\u6E05\u9664"}),e(v,{"data-inspector-line":"139","data-inspector-column":"16","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",htmlType:"submit",children:"\u67E5\u8A62"})]})]})}),h("div",{"data-inspector-line":"145","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",className:" flex justify-end gap-2 ",children:[e(it,{"data-inspector-line":"146","data-inspector-column":"10","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",handleExport:t,data:a}),e(v,{"data-inspector-line":"147","data-inspector-column":"10","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",onClick:Y,children:"\u65B0\u589E"})]}),e(U,{"data-inspector-line":"149","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\table\\TableTemplate.tsx",size:"small",onChange:K,scroll:{x:Q,y:I-200},columns:S,dataSource:rt(a),pagination:{position:["bottomCenter"]},rowSelection:s?{type:"checkbox",onChange:(u,m)=>{s(m)}}:void 0,...p})]})})};function rt(a,o){let n=1;return i(a,o||"");function i(c,l){if(Array.isArray(c))return c.map(s=>i(s,l));if(typeof c=="object"&&c!==null){const s={...c};return s.key=s[l]!==void 0?String(s[l]):String(n++),s.children&&(s.children=i(s.children,l).map(t=>(t.key=`${s.key}-${t.key}`,t))),s}else return c}}function lt(a){const[o,n]=_.exports.useState(a),[i,c]=V(),l=_.exports.useMemo(()=>{const s={};for(const[t,d]of i)s[t]=d;return s},[i]);return _.exports.useEffect(()=>{n(l)},[]),X(()=>{c(o)},[o]),[o,n]}const ut=({children:a,content:o})=>{const n=[{key:Z(),label:e("div",{"data-inspector-line":"16","data-inspector-column":"13","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\button\\DropdownButton.tsx",className:"flex flex-col gap-1",children:a})}];return e(F,{children:e(G,{"data-inspector-line":"21","data-inspector-column":"6","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\button\\DropdownButton.tsx",menu:{items:n},placement:"bottom",children:o||e(J,{"data-inspector-line":"22","data-inspector-column":"29","data-inspector-relative-path":"src\\views\\ui\\antd\\components\\button\\DropdownButton.tsx",children:"\u64CD\u4F5C"})})})},dt=()=>{const{modal:a,message:o}=st(),n=N(),i=L(),{mutate:c}=P({mutationFn:z,onSuccess:()=>{o.success("\u522A\u9664\u6210\u529F"),i.invalidateQueries(["store_list"])},onError:t=>{o==null||o.error("\u522A\u9664\u5931\u6557!!"+(t==null?void 0:t.message)||"")}}),l=t=>{n(t)},s=t=>{a==null||a.confirm({title:e("div",{"data-inspector-line":"38","data-inspector-column":"13","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",children:"\u64CD\u4F5C\u6709\u5371\u96AA"}),icon:e(et,{"data-inspector-line":"39","data-inspector-column":"12","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx"}),content:"\u522A\u9664\u8CC7\u6599\u4E0D\u53EF\u56DE\u5FA9\uFF0C\u78BA\u8A8D\u522A\u9664?",okText:"\u78BA\u8A8D",cancelText:"\u53D6\u6D88",onOk:()=>{c(t.id)}})};return[{title:"id",dataIndex:"id"},{title:"\u6848\u4EF6\u7DE8\u865F",render:t=>e(tt,{"data-inspector-line":"56","data-inspector-column":"15","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",to:t.id,children:t.caseNo})},{title:"\u7279\u5E97\u7DE8\u865F",width:140,dataIndex:"specialStoreNo",filterDropdown:mt,filterIcon:pt},{title:"\u7279\u5E97\u540D\u7A31",dataIndex:"specialStoreName"},{title:"\u7D71\u4E00\u7DE8\u865F",dataIndex:"uniformNo",width:140},{title:"\u62DB\u652C\u55AE\u4F4D",dataIndex:"solicitationUnit"},{title:"\u72C0\u614B",render:t=>e("div",{"data-inspector-line":"82","data-inspector-column":"15","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",children:t.status==="normal"?"\u6B63\u5E38":"\u7570\u5E38"})},{title:"\u64CD\u4F5C",fixed:"right",width:90,key:"operation",render:t=>h(ut,{"data-inspector-line":"92","data-inspector-column":"10","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",children:[e(v,{"data-inspector-line":"93","data-inspector-column":"12","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",onClick:()=>{l(t.id)},children:"\u7DE8\u8F2F"}),e(v,{"data-inspector-line":"100","data-inspector-column":"12","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",onClick:()=>{s(t)},type:"primary",danger:!0,disabled:!1,children:"\u522A\u9664"})]})}]},pt=a=>e(j,{"data-inspector-line":"119","data-inspector-column":"2","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",style:{color:a?"#1677ff":void 0}}),mt=a=>{const{selectedKeys:o,setSelectedKeys:n,confirm:i,clearFilters:c}=a,l=()=>{c==null||c(),i({closeDropdown:!0})};return h("div",{"data-inspector-line":"128","data-inspector-column":"4","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",className:"p-2",children:[e(A,{"data-inspector-line":"129","data-inspector-column":"6","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",onChange:s=>n(s.target.value?[s.target.value]:[]),onPressEnter:()=>i(),value:o[0]}),h("div",{"data-inspector-line":"136","data-inspector-column":"6","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",className:"mt-2 flex justify-around gap-2",children:[e(v,{"data-inspector-line":"137","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",type:"primary",icon:e(j,{"data-inspector-line":"139","data-inspector-column":"16","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx"}),onClick:()=>i(),children:"\u641C\u5C0B"}),e(v,{"data-inspector-line":"144","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",onClick:l,children:"\u91CD\u7F6E"}),e(v,{"data-inspector-line":"145","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\columns.tsx",danger:!0,onClick:()=>i({closeDropdown:!0}),children:"\u53D6\u6D88"})]})]})},{RangePicker:vt}=at,E="YYYY\u5E74MM\u6708DD\u65E5",ht=()=>[{label:"\u6848\u4EF6\u7DE8\u865F",name:"caseNo",content:e(T,{"data-inspector-line":"15","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\searchLayoutArray.tsx",placeholder:"\u9078\u64C7\u6848\u4EF6\u7DE8\u865F",options:[{value:"S_1734452021",label:"S_1734452021"},{value:"S_3472126016",label:"S_3472126016"},{value:"S_0672575620",label:"S_0672575620"}]})},{label:"\u7279\u5E97\u7DE8\u865F",name:"specialStoreNo"},{label:"\u72C0\u614B",name:"status",className:"col-span-2",content:e(T,{"data-inspector-line":"34","data-inspector-column":"8","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\searchLayoutArray.tsx",className:"w-full",placeholder:"\u9078\u64C7\u72C0\u614B",options:[{value:"normal",label:"\u6B63\u5E38"},{value:"abnormal",label:"\u7570\u5E38"}]})},{label:"\u62DB\u652C\u6642\u9593",name:"\u62DB\u652C\u6642\u9593",content:e(vt,{"data-inspector-line":"47","data-inspector-column":"15","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\components\\searchLayoutArray.tsx",className:"w-full",format:E}),className:"col-span-4",initialValue:[B("2015/01/01",E),B("2015/01/01",E)]}],xt={_page:"1",_limit:"10"},ft=()=>{const[a,o]=lt(xt),{data:n,isLoading:i}=nt({queryKey:["store_list",{filterInfo:a}],keepPreviousData:!0,queryFn:()=>H(a)}),c=t=>{var p,x;const d=(p=t.current)==null?void 0:p.toString(),r=(x=t.pageSize)==null?void 0:x.toString();o({...a,_page:d,_limit:r})},l=t=>{const d={};for(const r in t)t[r]!==void 0&&r!=="\u62DB\u652C\u6642\u9593"&&(d[r]=t[r]);o({...a,...d})},s=t=>{var r;const d={...a};for(const p in t)t[p]===null?delete d[p]:d[p]=(r=t[p])==null?void 0:r.toString();o(d)};return e(F,{children:e(ct,{"data-inspector-line":"60","data-inspector-column":"6","data-inspector-relative-path":"src\\views\\ui\\antd\\store_upload_list\\page.tsx",data:(n==null?void 0:n.data)||[],columns:dt(),searchLayoutArray:ht(),loading:i,rowClassName:t=>t.status!=="abnormal"?"":"bg-slate-300",templateTableProps:{width:100,align:"center"},onSearch:l,onPaginate:c,onSort:t=>console.log(t),onFilter:s,pagination:{position:["bottomCenter"],pageSize:parseInt((a==null?void 0:a._limit)||"10"),total:(n==null?void 0:n.total)||0,current:parseInt((a==null?void 0:a._page)||"1")}})})};export{ft as default};
