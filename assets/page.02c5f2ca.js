import{ab as x,aa as u,a8 as c,j as t,a as o,h,r as d,a1 as b,a2 as q,bT as S,Q as C,z as L,bU as N}from"./index.1d059382.js";const p=[{userId:1,id:1,title:"sunt aut facere repellat provident occaecati excepturi optio reprehenderit",body:`quia et suscipit
suscipit recusandae consequuntur expedita et cum
reprehenderit molestiae ut ut quas totam
nostrum rerum est autem sunt rem eveniet architecto`},{userId:1,id:2,title:"qui est esse",body:`est rerum tempore vitae
sequi sint nihil reprehenderit dolor beatae ea dolores neque
fugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis
qui aperiam non debitis possimus qui neque nisi nulla`},{userId:1,id:3,title:"ea molestias quasi exercitationem repellat qui ipsa sit aut",body:`et iusto sed quo iure
voluptatem occaecati omnis eligendi aut ad
voluptatem doloribus vel accusantium quis pariatur
molestiae porro eius odio et labore et velit aut`},{userId:1,id:4,title:"eum et est occaecati",body:`ullam et saepe reiciendis voluptatem adipisci
sit amet autem assumenda provident rerum culpa
quis hic commodi nesciunt rem tenetur doloremque ipsam iure
quis sunt voluptatem rerum illo velit`},{userId:1,id:5,title:"nesciunt quas odio",body:`repudiandae veniam quaerat sunt sed
alias aut fugiat sit autem sed est
voluptatem omnis possimus esse voluptatibus quis
est aut tenetur dolor neque`},{title:"121",body:"1e12e",userId:1,id:1692668632560},{title:"3r23",body:"1r23r23r23r",userId:1,id:1692668643686},{title:"2f2f3",body:"34g34g34g",userId:1,id:1692668673815},{title:"123",body:"12e",userId:1,id:1692669729274}],k=[{id:1,name:"Leanne Graham",username:"Bret",email:"Sincere@april.biz",address:{street:"Kulas Light",suite:"Apt. 556",city:"Gwenborough",zipcode:"92998-3874",geo:{lat:"-37.3159",lng:"81.1496"}},phone:"1-770-736-8031 x56442",website:"hildegard.org",company:{name:"Romaguera-Crona",catchPhrase:"Multi-layered client-server neural-net",bs:"harness real-time e-markets"}},{id:2,name:"Ervin Howell",username:"Antonette",email:"Shanna@melissa.tv",address:{street:"Victor Plains",suite:"Suite 879",city:"Wisokyburgh",zipcode:"90566-7771",geo:{lat:"-43.9509",lng:"-34.4618"}},phone:"010-692-6593 x09125",website:"anastasia.net",company:{name:"Deckow-Crist",catchPhrase:"Proactive didactic contingency",bs:"synergize scalable supply-chains"}},{id:3,name:"Clementine Bauch",username:"Samantha",email:"Nathan@yesenia.net",address:{street:"Douglas Extension",suite:"Suite 847",city:"McKenziehaven",zipcode:"59590-4157",geo:{lat:"-68.6102",lng:"-47.0653"}},phone:"1-463-123-4447",website:"ramiro.info",company:{name:"Romaguera-Jacobson",catchPhrase:"Face to face bifurcated interface",bs:"e-enable strategic applications"}},{id:4,name:"Patricia Lebsack",username:"Karianne",email:"Julianne.OConner@kory.org",address:{street:"Hoeger Mall",suite:"Apt. 692",city:"South Elvis",zipcode:"53919-4257",geo:{lat:"29.4572",lng:"-164.2990"}},phone:"493-170-9623 x156",website:"kale.biz",company:{name:"Robel-Corkery",catchPhrase:"Multi-tiered zero tolerance productivity",bs:"transition cutting-edge web services"}},{id:5,name:"Chelsey Dietrich",username:"Kamren",email:"Lucio_Hettinger@annie.ca",address:{street:"Skiles Walks",suite:"Suite 351",city:"Roscoeview",zipcode:"33263",geo:{lat:"-31.8129",lng:"62.5342"}},phone:"(254)954-1289",website:"demarco.info",company:{name:"Keebler LLC",catchPhrase:"User-centric fault-tolerant solution",bs:"revolutionize end-to-end systems"}},{id:6,name:"Mrs. Dennis Schulist",username:"Leopoldo_Corkery",email:"Karley_Dach@jasper.info",address:{street:"Norberto Crossing",suite:"Apt. 950",city:"South Christy",zipcode:"23505-1337",geo:{lat:"-71.4197",lng:"71.7478"}},phone:"1-477-935-8478 x6430",website:"ola.org",company:{name:"Considine-Lockman",catchPhrase:"Synchronised bottom-line interface",bs:"e-enable innovative applications"}},{id:7,name:"Kurtis Weissnat",username:"Elwyn.Skiles",email:"Telly.Hoeger@billy.biz",address:{street:"Rex Trail",suite:"Suite 280",city:"Howemouth",zipcode:"58804-1099",geo:{lat:"24.8918",lng:"21.8984"}},phone:"210.067.6132",website:"elvis.io",company:{name:"Johns Group",catchPhrase:"Configurable multimedia task-force",bs:"generate enterprise e-tailers"}},{id:8,name:"Nicholas Runolfsdottir V",username:"Maxime_Nienow",email:"Sherwood@rosamond.me",address:{street:"Ellsworth Summit",suite:"Suite 729",city:"Aliyaview",zipcode:"45169",geo:{lat:"-14.3990",lng:"-120.7677"}},phone:"586.493.6943 x140",website:"jacynthe.com",company:{name:"Abernathy Group",catchPhrase:"Implemented secondary concept",bs:"e-enable extensible e-tailers"}},{id:9,name:"Glenna Reichert",username:"Delphine",email:"Chaim_McDermott@dana.io",address:{street:"Dayna Park",suite:"Suite 449",city:"Bartholomebury",zipcode:"76495-3109",geo:{lat:"24.6463",lng:"-168.8889"}},phone:"(775)976-6794 x41206",website:"conrad.com",company:{name:"Yost and Sons",catchPhrase:"Switchable contextually-based project",bs:"aggregate real-time technologies"}},{id:10,name:"Clementina DuBuque",username:"Moriah.Stanton",email:"Rey.Padberg@karina.biz",address:{street:"Kattie Turnpike",suite:"Suite 198",city:"Lebsackbury",zipcode:"31428-2261",geo:{lat:"-38.2386",lng:"57.2232"}},phone:"024-648-3804",website:"ambrose.net",company:{name:"Hoeger LLC",catchPhrase:"Centralized empowering task-force",bs:"target end-to-end models"}}],m=new x.exports(u);m.onGet(/http:\/\/localhost:3000\/users\/\d+/).reply(n=>{const e=n.url,s=e==null?void 0:e.slice(e.lastIndexOf("/")+1);return[200,k.find(i=>i.id.toString()===s)]});m.onGet("http://localhost:3000/posts").reply(n=>{const{_page:e,_limit:s}=n.params;return[200,w(p,e,s),{"x-total-count":"5"}]});m.onGet(/http:\/\/localhost:3000\/posts\/\d+/).reply(n=>{const e=n.url,s=e==null?void 0:e.slice(e.lastIndexOf("/")+1);return[200,p.find(i=>i.id.toString()===s)]});m.onPost("http://localhost:3000/posts").reply(n=>{const s={...JSON.parse(n.data),userId:1,id:Date.now()};return p.push(s),[200,s]});function w(n,e="1",s=n.length.toString()){const a=parseInt(e,10),i=parseInt(s,10),l=(a-1)*i,r=l+i;return n.slice(l,r)}function y(){return u.get("http://localhost:3000/posts",{params:{_sort:"title"}}).then(n=>n.data)}function f(n){return u.get("http://localhost:3000/posts",{params:{_page:n,_sort:"title",_limit:2}}).then(e=>({nextPage:n*2<=parseInt(e.headers["x-total-count"])?n+1:void 0,previousPage:n>1?n-1:void 0,posts:e.data}))}function P(n){return u.get(`http://localhost:3000/posts/${n}`).then(e=>e.data)}function I({title:n,body:e}){return u.post("http://localhost:3000/posts",{title:n,body:e,userId:1,id:Date.now()}).then(s=>s.data)}function D(n){return u.get(`http://localhost:3000/users/${n}`).then(e=>e.data)}function v({id:n}){var a,i;const e=c({queryKey:["posts",n],queryFn:()=>P(n)}),s=c({queryKey:["users",(a=e==null?void 0:e.data)==null?void 0:a.userId],enabled:((i=e==null?void 0:e.data)==null?void 0:i.userId)!=null,queryFn:()=>D(e.data.userId)});return e.status==="loading"?t("h1",{children:"Loading..."}):e.status==="error"?t("h1",{children:JSON.stringify(e.error)}):o(h,{children:[o("h1",{children:[e.data.title," ",t("br",{}),t("small",{children:s.isLoading?"Loading User...":s.isError?"Error Loading User":s.data.name})]}),t("p",{children:e.data.body})]})}function z({setCurrentPage:n}){const e=d.exports.useRef(null),s=d.exports.useRef(null),a=b(),i=q({mutationFn:I,onSuccess:r=>{a.setQueryData(["posts",r.id],r),a.invalidateQueries(["posts"],{exact:!0}),n(t(v,{id:r.id}))}});function l(r){r.preventDefault(),!((e==null?void 0:e.current)===null||s.current===null)&&i.mutate({title:e==null?void 0:e.current.value,body:s==null?void 0:s.current.value})}return o("div",{className:"w-full h-[200px] flex justify-center items-center",children:[i.isError&&JSON.stringify(i.error),t("h1",{children:"Create Post"}),o("form",{className:" space-y-4",onSubmit:l,children:[o("div",{children:[t("label",{htmlFor:"title",children:"Title"}),t("input",{className:"input bg-white",id:"title",ref:e})]}),o("div",{children:[t("label",{htmlFor:"body",children:"Body"}),t("input",{className:"input bg-white",id:"body",ref:s})]}),t("button",{className:"btn",disabled:i.isLoading,children:i.isLoading?"Loading...":"Create"})]})]})}function F(){const{status:n,error:e,data:s,isFetchingNextPage:a,hasNextPage:i,fetchNextPage:l}=S({queryKey:["posts","infinite"],getNextPageParam:r=>r.nextPage,queryFn:({pageParam:r=1})=>f(r)});return n==="loading"?t("h1",{children:"Loading..."}):n==="error"?t("h1",{children:JSON.stringify(e)}):o(h,{children:[t("h1",{children:"Post List Infinite"}),i&&t("button",{className:"btn btn-xs",onClick:()=>l(),children:a?"Loading...":"Load More"}),t("div",{children:s.pages.flatMap(r=>r.posts).map(r=>t("div",{children:r.title},r.id))})]})}function K(){const[n,e]=d.exports.useState(1),{status:s,error:a,data:i,isPreviousData:l}=c({queryKey:["posts",{page:n}],keepPreviousData:!0,queryFn:()=>f(n)});return s==="loading"?t("h1",{children:"Loading..."}):s==="error"?t("h1",{children:JSON.stringify(a)}):o(h,{children:[o("h1",{children:["Post List \u5206\u9801",t("br",{}),t("small",{children:l&&"Previous Data"})]}),i.posts.map(r=>t("div",{children:r.title},r.id)),t("button",{disabled:!i.previousPage,className:"btn btn-xs",onClick:()=>i.previousPage&&e(i==null?void 0:i.previousPage),children:"Previous"}),t("button",{disabled:!i.nextPage,className:"btn btn-xs",onClick:()=>i.nextPage&&e(i==null?void 0:i.nextPage),children:"Next"})]})}function g(){const n=c({queryKey:["posts"],queryFn:y,placeholderData:[{id:1,title:"Initial Data"}]});return n.status==="loading"?t("h1",{children:"Loading...."}):n.status==="error"?t("h1",{children:JSON.stringify(n.error)}):o("div",{children:[t("h1",{children:"Posts List 1"}),t("ol",{children:n.data.map(e=>t("li",{children:e.title},e.id))})]})}function M(){const n=c({queryKey:["posts"],queryFn:y});return n.status==="loading"?t("h1",{children:"Loading..."}):n.status==="error"?t("h1",{children:JSON.stringify(n.error)}):o("div",{children:[t("h1",{children:"Post List 2"}),t("ol",{children:n.data.map(e=>t("li",{children:e.title},e.id))})]})}function O(){const[n,e]=d.exports.useState(t(g,{})),s=b();function a(){const i=s.prefetchQuery({queryKey:["posts",1],queryFn:()=>P(1)});console.log("preFetch",i)}return o(h,{children:[o("div",{className:"flex flex-wrap gap-4 p-3 ",children:[t("button",{className:"btn btn-sm",onClick:()=>e(t(g,{})),children:"placeholderData"}),t("button",{className:"btn btn-sm",onClick:()=>e(t(M,{})),children:"Posts List"}),t("button",{className:"btn btn-sm",onMouseEnter:a,onClick:()=>e(t(v,{id:1})),children:"preFetch First Post"}),t("button",{className:"btn btn-sm",onClick:()=>e(t(z,{setCurrentPage:e})),children:"Mutation"}),t("button",{className:"btn btn-sm",onClick:()=>e(t(K,{})),children:"\u5206\u9801keepPreviousData"}),t("button",{className:"btn btn-sm",onClick:()=>e(t(F,{})),children:"fetchNextPage"})]}),t("br",{}),n]})}function J(){const n=new C({defaultOptions:{queries:{staleTime:3e5}}});return o(L,{client:n,children:[t(O,{}),t(N,{})]})}export{J as default};
