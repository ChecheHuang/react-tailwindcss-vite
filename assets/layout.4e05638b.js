import{u as v,g as x,r as h,a as p,j as s,o as y,p as C,i as K,s as E,B as I,v as B,w as j,x as A,D as $,y as J,U as L,Q as M,z as P,O as z}from"./index.5b4f89d9.js";import{r as S,c as N}from"./index.bd83d55c.js";import{E as F,A as H}from"./AntdProvider.ed4736de.js";import{u as Q}from"./useHook.10a265ff.js";const T=JSON.parse(sessionStorage.getItem("selectKeys")||"[]"),U=JSON.parse(sessionStorage.getItem("openKeys")||"[]"),q=({collapsed:r})=>{var f,b,w;const t=(w=(b=(f=S.find(d=>d.path==="/ui"))==null?void 0:f.children)==null?void 0:b.find(d=>d.path==="/ui/antd"))==null?void 0:w.children,a=v(),n=x(),[o,e]=h.exports.useState(T),[c,l]=h.exports.useState(U),{menu:i,keyArr:u}=O(t),m=d=>{const k=[d[d.length-1]];l(k),sessionStorage.setItem("openKeys",JSON.stringify(k))},g=d=>{a(d.key),sessionStorage.setItem("selectKeys",JSON.stringify([d.key])),e([d.key])};return h.exports.useEffect(()=>{!u.includes(n.pathname)||(sessionStorage.setItem("selectKeys",JSON.stringify([n.pathname])),e([n.pathname]))},[n.pathname]),p("div",{className:N("max-h-[100vh] overflow-y-scroll bg-[#001529] scrollbar-none duration-300 ease-in-out ",r?"w-20":" w-[200px]"),children:[s(y,{to:"/setting",children:p("div",{className:"bg-dark sticky top-0 z-10 flex h-16 items-center justify-center  gap-3 ",children:[s(C,{width:50,className:"rounded-md",src:"https://images.pexels.com/photos/434341/pexels-photo-434341.jpeg?auto=compress&cs=tinysrgb&w=600",alt:""}),!r&&s("div",{className:"break-keep text-white ",children:"Antd\u5F8C\u53F0"})]})}),s(K,{inlineCollapsed:r,onClick:g,onOpenChange:m,mode:"inline",theme:"dark",selectedKeys:o,openKeys:c,items:i})]})};function O(r){const t=[];function a(o){o.forEach(e=>{!e.isHidden&&!e.path.includes(":")&&(t.includes(e.path)||t.push(e.path)),e.children&&a(e.children)})}const n=r.reduce((o,e)=>{if(e.isHidden||e.path.includes(":"))return o;const{path:c,icon:l,children:i,label:u}=e,m={key:i?c+"/layout":c,icon:l,label:u,...i&&{children:O(i).menu}};return i||t.push(c),[...o,m]},[]);return a(r),{menu:n,keyArr:t}}const D=()=>{const t=x().pathname.split("/").filter(e=>e),a=R(S),n=t.map((e,c)=>{const l=`/${t.slice(0,c+1).join("/")}`,{name:i,icon:u}=_(a,l);return{key:l,title:p(y,{to:l,children:[u&&u," ",s("span",{children:i})]})}}),o=[{title:s(y,{to:"/ui/antd",children:s(E,{})}),key:"home"}].concat(n.filter((e,c)=>c!==0));return s(I,{items:o})},W=h.exports.memo(D);function _(r,t){for(const[a,n]of r.entries())if(a.test(t))return n;return{name:"",icon:""}}function R(r){const t=new Map,a=[];return r.forEach(n=>{const{path:o,name:e,icon:c,children:l}=n,i=c?{name:e}:{name:e,icon:c},u=new RegExp(`^${o.replace(/:[^/]+/g,"[^/]+")}$`);l?(t.set(u,i),R(l).forEach((g,f)=>{t.set(f,g)})):o.includes(":")?a.push({path:o,...i}):t.set(u,i)}),a.forEach(({path:n,...o})=>{const e=new RegExp(`^${n.replace(/:[^/]+/g,"[^/]+")}$`);t.set(e,o)}),t}const V=({toggleCollapsed:r,collapsed:t,className:a})=>{const n=v(),o=[{key:"1",label:s(F,{onClick:()=>{localStorage.clear(),n("/login")},type:"info",children:"\u767B\u51FA"})}];return p("header",{className:N("flex h-16  items-center justify-between px-3 shadow-slate-500 bg-white	",a),children:[p("div",{className:"flex gap-10",children:[s(B,{size:"small",onClick:r,children:t?s(j,{}):s(A,{})}),s(W,{})]}),s($,{menu:{items:o},placement:"bottomLeft",arrow:!0,children:s(J,{src:"https://images.pexels.com/photos/15889175/pexels-photo-15889175.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",className:"cursor-pointer",size:44,icon:s(L,{})})})]})},G=new M({defaultOptions:{queries:{staleTime:1e3*60*5}}}),te=()=>{const{pathname:r}=x(),{windowWidth:t}=Q(),[a,n]=h.exports.useState(t<1e3),o=h.exports.useRef(null);return h.exports.useEffect(()=>{const e=t<1e3;n(e)},[t]),h.exports.useEffect(()=>{var e;(e=o.current)==null||e.scrollTo(0,0)},[r]),s(P,{client:G,children:s(H,{children:p("section",{className:"flex h-screen",children:[s(q,{collapsed:a}),p("section",{className:"flex flex-1 flex-col overflow-y-auto",children:[s(V,{toggleCollapsed:()=>n(!a),collapsed:a}),s("main",{ref:o,className:"scrollbar-thumb-dark relative h-[calc(100vh-4rem)] overflow-y-auto scroll-smooth  bg-slate-200 scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-rounded   ",children:s(z,{})})]})]})})})};export{te as default};
